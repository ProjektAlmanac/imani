<div class="container">
  <mat-card appearance="raised">
    <mat-card-header>
      <h1>Cree su cuenta</h1>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="form">
        <mat-form-field>
          <mat-label>Nombre</mat-label>
          <input matInput formControlName="nombre" />
          @if (signupForm.get('nombre')?.hasError('required')) {
          <mat-error>Este campo es obligatorio</mat-error>
          }
        </mat-form-field>

        <mat-form-field>
          <mat-label>Apellido(s)</mat-label>
          <input matInput formControlName="apellidos" />
          @if (signupForm.get('apellidos')?.hasError('required')) {
          <mat-error>Este campo es obligatorio</mat-error>
          }
        </mat-form-field>

        <mat-form-field>
          <mat-label>Nombre de usuario</mat-label>
          <input matInput formControlName="nombreUsuario" />
          @if (signupForm.get('nombreUsuario')?.hasError('required')) {
          <mat-error>Este campo es obligatorio</mat-error>
          }
        </mat-form-field>

        <mat-form-field>
          <mat-label>Contraseña</mat-label>
          <input type="password" matInput formControlName="password" />
          @if (signupForm.get('password')?.hasError('required')) {
          <mat-error>Este campo es obligatorio</mat-error>
          } @else if (signupForm.get('password')?.hasError('minlength')) {
          <mat-error>Mínimo 8 caracteres</mat-error>
          }
        </mat-form-field>

        <mat-radio-group formControlName="rol">
          <mat-radio-button value="medico">Médico</mat-radio-button>
          <mat-radio-button value="farmaceutico">Farmacéutico</mat-radio-button>
        </mat-radio-group>

        @if (signupForm.value.rol === "medico") {
        <mat-form-field class="centro-medico">
          <mat-label>Centro médico</mat-label>
          <input matInput formControlName="centroMedico" />
          @if (signupForm.get('centroMedico')?.hasError('required')) {
          <mat-error>Este campo es obligatorio</mat-error>
          }
        </mat-form-field>
        }

        <button type="submit" mat-raised-button>Crear cuenta</button>

        @if (error() !== undefined) {
        <mat-error class="error">{{ error() }}</mat-error>
        }
      </form>
    </mat-card-content>
  </mat-card>
</div>
